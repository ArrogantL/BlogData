# 2.2网络应用的基本原理

# 网络应用进程通信

## 进程间通信

- 进程
  - 主机上运行的程序
  - 客户机进程: 发起通信的进程
  - 服务器进程: 等待通信请求的进程

- 同一主机上运行的进程之间如何通信？
  - 进程间通信机制
  - 操作系统提供

- 不同主机上运行的进程间如何通信？
  - 消息交换

**采用P2P架构的应用是否存在客户机进程/服务器进程之分？**

也是有的，只是角色转换非常自由

## 套接字: Socket

- 进程间通信利用socket发送/接收消息实现
- **类似于寄信**
  - 发送方将消息送到门外邮箱
  - 发送方依赖（门外的）传输基础设施将消息传到接收方所在主机，并送到接收方的门外
  - 接收方从门外获取消息
- 传输基础设施向进程提供API
  - 传输协议的选择
  - 参数的设置

## 寻址

**不同主机上的进程间通信，那么每个进程必须拥有标识符**

- 如何寻址主机？——IP地址
  -  Q: 主机有了IP地址后，是否足以定位进程？
  -  **A: 否。IP地址只能定位主机，同一主机上可能同时有多个进程需要通信。**
- **端口号/Port number**
  -  为主机上**每个需要通信的进程**分配一个端口号
  -  **HTTP Server: 80**
  -  **Mail Server：25**
- 进程的标识符
  -  **IP地址+端口号**

## 应用层协议

网络应用需遵循应用层协议,但是不仅仅有应用层协议

- 公开协议
  -  由RFC(Request For Comments)定义
  -  允许互操作
  -  HTTP, SMTP, ……
- 私有协议
  -  多数P2P文件共享应用

### 应用层协议的内容

- 消息的类型(**type**)
  -  请求消息
  -  响应消息
- 消息的语法(**syntax**)/格式
  -  消息中有哪些字段(**field**)？
  -  每个字段如何描述
- 字段的语义(**semantics**)
  -  字段中信息的含义
- 规则(**rules**)
  -  进程**何时**发送/响应消息
  -  进程**如何**发送/响应消息





# 网络应用的需求与传输层服务

## 网络应用对传输服务的需求

- **数据丢失**(data loss)/可靠性(reliability)
  -  某些网络应用能够容忍一定的数据丢失：网络电话
  -  某些网络应用要求100%可靠的数据传输：文件传输，telnet
- 时间(timing)/**延迟**(delay)
  -  有些应用只有在延迟足够低时才“有效”
  -  网络电话/网络游戏
- **带宽**(bandwidth)
  -  某些应用只有在带宽达到最低要求时才“有效”：网络视频
  -  某些应用能够适应任何带宽——弹性应用：email

## Internet提供的传输服务

- TCP服务，传输控制协议（英语：Transmission Control Protocol，縮寫為**TCP**）
  - 面向连接: 客户机/服务器进程间需要建立连接
  - 可靠的传输
  - 流量控制: 发送方不会发送速度过快，超过接收方的处理能力
  - 拥塞控制: 当网络负载过重时能够限制发送方的发送速度
  - **不提供时间/延迟保障**
  - **不提供最小带宽保障**
- UDP服务，用户数据报协议（英语：User Datagram Protocol，縮寫為**UDP**），又稱使用者資料包協定
  - 无连接
  - 不可靠的数据传输
  - 不提供
    - 可靠性保障
    - 流量控制
    - 拥塞控制
    - 延迟保障
    - 带宽保障
  - 正是由与udp如此低级，他只能支持最基本的功能，但是它提供了掌控数据传输的自由性。可以让应用自由设置发挥



## 课后练习

- 盘点你计算机上的所有网络应用，制作一个清单，包括网络应用的名字、功能、协议等。
- 基于上述清单，制作表格，分析这些网络应用对传输服务的需求。分析这些网络应用所使用的传输服务是TCP还是UDP。